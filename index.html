<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CrabGest - Gestion de Brasserie</title>
    <link rel="stylesheet" href="./styles/theme.css">
    <link rel="stylesheet" href="./styles/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
</head>
<body>
    <header>
        <h1>CrabGest</h1>
        <div class="logo" style="width: 100px; height: 50px; background-color: var(--crab-orange); margin: 0 auto; border-radius: 5px;"></div>
    </header>

    <nav class="tabs">
        <button class="tab-button active" data-tab="stocks">Stocks</button>
        <button class="tab-button" data-tab="recettes">Recettes</button>
        <button class="tab-button" data-tab="fermentation">Fermentation</button>
        <button class="tab-button" data-tab="conditionnement">Conditionnement</button>
        <button class="tab-button" data-tab="ventes">Ventes</button>
        <button class="tab-button" data-tab="douane">Douane</button>
    </nav>

    <main>
        <!-- Stocks -->
        <section id="stocks" class="tab active">
            <h2>Gestion des Stocks</h2>
            <div class="card">
                <div class="form-group">
                    <select id="select-ingredient" class="form-control"></select>
                    <select id="select-biere" class="form-control"></select>
                    <input type="number" id="quantite-retrait" class="form-control" placeholder="Quantité (g)">
                    <button onclick="retirerStock()" class="btn btn-primary">Retirer du stock</button>
                </div>
                <div class="table-responsive">
                    <table id="table-stocks" class="table"></table>
                </div>
                <div class="card">
                    <select id="select-biere-historique" class="form-control" onchange="afficherHistoriqueParBiere(this.value)"></select>
                    <div class="table-responsive">
                        <table id="historique-biere" class="table"></table>
                    </div>
                </div>
            </div>
        </section>

        <!-- Recettes -->
        <section id="recettes" class="tab">
            <h2>Gestion des Recettes</h2>
            <div class="card">
                <div class="form-group">
                    <input type="text" id="nom-recette" class="form-control" placeholder="Nom de la recette">
                    <input type="text" id="style-recette" class="form-control" placeholder="Style">
                    <input type="number" id="degre-recette" class="form-control" placeholder="Degré alcoolique">
                    <input type="number" id="volume-recette" class="form-control" placeholder="Volume (L)">
                    <button onclick="ajouterRecette()" class="btn btn-primary">Ajouter Recette</button>
                </div>
                <div class="table-responsive">
                    <table id="table-recettes" class="table"></table>
                </div>
            </div>
        </section>

        <!-- Fermentation -->
        <section id="fermentation" class="tab">
            <h2>Suivi de Fermentation</h2>
            <div class="card">
                <div class="form-group">
                    <select id="select-biere-fermentation" class="form-control" onchange="afficherSuiviFermentation(this.value)"></select>
                    <div class="fermentation-actions">
                        <input type="datetime-local" id="date-action" class="form-control">
                        <select id="type-action" class="form-control">
                            <option value="densite">Densité (SG)</option>
                            <option value="temperature">Température (°C)</option>
                            <option value="purge">Purge (mL)</option>
                            <option value="pression">Pression (bars)</option>
                            <option value="dry_hopping">Dry Hopping (g)</option>
                        </select>
                        <input type="number" id="valeur-action" class="form-control" placeholder="Valeur">
                        <button onclick="ajouterActionFermentation()" class="btn btn-primary">Ajouter Action</button>
                    </div>
                    <div style="height: 300px;">
                        <canvas id="fermentationChart" class="chart"></canvas>
                    </div>
                </div>
        </section>

        <!-- Conditionnement -->
        <section id="conditionnement" class="tab">
            <h2>Conditionnement</h2>
            <div class="card">
                <div class="form-group">
                    <select id="select-biere-conditionnement" class="form-control"></select>
                    <input type="number" id="volume-conditionne" class="form-control" placeholder="Volume (L)">
                    <input type="number" id="abv-final" class="form-control" placeholder="ABV final">
                    <select id="type-contenant" class="form-control">
                        <option value="bouteille_33cl">Bouteille 33cl</option>
                        <option value="bouteille_50cl">Bouteille 50cl</option>
                        <option value="bouteille_75cl">Bouteille 75cl</option>
                        <option value="canette_44cl">Canette 44cl</option>
                    </select>
                    <input type="number" id="quantite-contenant" class="form-control" placeholder="Quantité">
                    <button onclick="ajouterConditionnement()" class="btn btn-primary">Conditionner</button>
                </div>
                <div class="table-responsive">
                    <table id="table-conditionnements" class="table"></table>
                </div>
            </div>
        </section>

        <!-- Ventes -->
        <section id="ventes" class="tab">
            <h2>Gestion des Ventes</h2>
            <div class="card">
                <div class="form-group">
                    <select id="select-conditionnement" class="form-control"></select>
                    <input type="number" id="quantite-vente" class="form-control" placeholder="Quantité">
                    <input type="number" id="prix-vente" class="form-control" placeholder="Prix unitaire">
                    <input type="text" id="nom-client" class="form-control" placeholder="Nom du client">
                    <button onclick="ajouterVente()" class="btn btn-primary">Enregistrer Vente</button>
                </div>
                <div class="table-responsive">
                    <table id="table-ventes" class="table"></table>
                </div>
            </div>
        </section>

        <!-- Douane -->
        <section id="douane" class="tab">
            <h2>Déclarations Douanières</h2>
            <div class="card">
                <div class="form-group">
                    <select id="select-mois-douane" class="form-control">
                        <option value="2025-12">Décembre 2025</option>
                    </select>
                    <button onclick="genererDeclarationDouane()" class="btn btn-primary">Générer Déclaration</button>
                </div>
                <div class="table-responsive">
                    <table id="table-douane" class="table"></table>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>© 2025 CrabGest - Association CRAB</p>
    </footer>

    <!-- Scripts chargés à la fin du body -->
    <script src="./scripts/app.js"></script>
    <script src="./scripts/stocks.js"></script>
    <script src="./scripts/recettes.js"></script>
    <script src="./scripts/fermentation.js"></script>
    <script src="./scripts/conditionnement.js"></script>
    <script src="./scripts/ventes.js"></script>
    <script src="././scripts/douane.js"></script>
</body>
</html>
